# üîç –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –ê–Ω–∞–ª—ñ–∑: –ü—Ä–æ–±–ª–µ–º–∏ –∑ –í—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏

**–î–∞—Ç–∞ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è:** 2026-02-04  
**–°–µ—Å—ñ—è:** agent:main:main  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤–∏—è–≤–ª–µ–Ω–∞

---

## üö® –ö–ª—é—á–æ–≤—ñ –ü—Ä–æ–±–ª–µ–º–∏

### 1. Lane Wait Exceeded (–ö—Ä–∏—Ç–∏—á–Ω–æ)
```
2026-02-03T12:51:29.753Z [diagnostic] lane wait exceeded: 
  lane=session:agent:main:main 
  waitedMs=9602 
  queueAhead=0
```

**–©–æ —Ü–µ:** –°–µ—Å—ñ—è —á–µ–∫–∞–ª–∞ 9.6 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–±—Ä–æ–±–∫—É —á–µ—Ä–≥–∏. –ö–æ–ª–∏ `queueAhead=0`, —Ü–µ –æ–∑–Ω–∞—á–∞—î —â–æ –Ω–µ–º–∞—î —ñ–Ω—à–∏—Ö –∑–∞–¥–∞—á –ø–æ–ø–µ—Ä–µ–¥—É ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –≤ –æ–±—Ä–æ–±—Ü—ñ –ø–æ—Ç–æ—á–Ω–æ—ó.

**–ù–∞—Å–ª—ñ–¥–æ–∫:** –Ø –º–æ–∂—É "–∑–∞–≤–∏—Å–∞—Ç–∏" —ñ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏, –ø–æ–∫–∏ —Å–∏—Å—Ç–µ–º–∞ —á–µ–∫–∞—î.

### 2. Memory Embeddings Fail (–í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)
```
[memory] embeddings: openai batch failed (1/2); 
  falling back to non-batch embeddings: 
  openai batch file upload failed: 404 404 page not found
```

**–©–æ —Ü–µ:** Ollama (–ª–æ–∫–∞–ª—å–Ω–∏–π embedding —Å–µ—Ä–≤–µ—Ä) –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –∞–±–æ –ø–æ–≤–µ—Ä—Ç–∞—î 404.

**–ö–æ–Ω—Ñ—ñ–≥:**
```json
"provider": "openai",
"remote": {
  "baseUrl": "http://localhost:11434/v1",
  "apiKey": "ollama"
}
```

**–ù–∞—Å–ª—ñ–¥–æ–∫:** –ö–æ–∂–µ–Ω memory_search —Å–ø–æ—á–∞—Ç–∫—É –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è batch upload, –æ—Ç—Ä–∏–º—É—î 404, –ø–æ—Ç—ñ–º fallback –Ω–∞ non-batch. –¶–µ –¥–æ–¥–∞—î ~1-2 —Å–µ–∫—É–Ω–¥–∏ –∑–∞—Ç—Ä–∏–º–∫–∏ –Ω–∞ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç.

### 3. Invalid Config (–°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)
```
agents.defaults.memorySearch.sources.2: Invalid input
```

**–©–æ —Ü–µ:** –í –∫–æ–Ω—Ñ—ñ–∑—ñ `sources: ["memory", "sessions"]` ‚Äî —Ü–µ 2 –µ–ª–µ–º–µ–Ω—Ç–∏ (—ñ–Ω–¥–µ–∫—Å–∏ 0 —ñ 1), –∞–ª–µ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä —à—É–∫–∞—î `sources.2`.

**–ù–∞—Å–ª—ñ–¥–æ–∫:** Gateway –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –∑–º—ñ–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥–∞, —â–æ –º–æ–∂–µ –ø–µ—Ä–µ—Ä–∏–≤–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ —Å–µ—Å—ñ—ó.

---

## üìä –ü–æ—Ç–æ—á–Ω–∏–π –°—Ç–∞–Ω –°–∏—Å—Ç–µ–º–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–Ω—è | –°—Ç–∞—Ç—É—Å |
|----------|----------|--------|
| Gateway | PID 85243, active | ‚úÖ |
| Tokens | 36.8k / 262k (14%) | ‚úÖ |
| Compaction | safeguard mode | ‚úÖ |
| Heartbeat | 30m interval | ‚úÖ |
| Memory Search | 404 errors | ‚ö†Ô∏è |
| Config | Invalid sources.2 | ‚ö†Ô∏è |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### Fix 1: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ Memory Embeddings (–ö—Ä–∏—Ç–∏—á–Ω–æ)

**–í–∞—Ä—ñ–∞–Ω—Ç A ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Ollama:**
```bash
ollama serve
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: curl http://localhost:11434/v1/embeddings
```

**–í–∞—Ä—ñ–∞–Ω—Ç B ‚Äî –í–∏–º–∫–Ω—É—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—ñ embeddings:**
```bash
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ ~/.clawdbot/clawdbot.json
"memorySearch": {
  "enabled": true,
  "provider": "openai",  # –∑–∞–ª–∏—à–∏—Ç–∏ openai, –∞–ª–µ –ø—Ä–∏–±—Ä–∞—Ç–∏ remote
  // –≤–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –∑–∞–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –±–ª–æ–∫ "remote"
}
```

**–í–∞—Ä—ñ–∞–Ω—Ç C ‚Äî –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–±—É–¥–æ–≤–∞–Ω–∏–π embedding:**
```bash
clawdbot config patch 'agents.defaults.memorySearch.provider = "local"'
```

### Fix 2: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ Config (–°–µ—Ä–µ–¥–Ω—ñ–π)

```bash
clawdbot doctor --fix
```

–ê–±–æ –≤—Ä—É—á–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `clawdbot.json` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç `sources[2]`.

### Fix 3: –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ Lane Timeout (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è, –º–æ–∂–Ω–∞ –∑–±—ñ–ª—å—à–∏—Ç–∏ —Ç–∞–π–º–∞—É—Ç–∏:
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω—ñ –ª—ñ–º—ñ—Ç–∏
clawdbot config get | grep -i timeout
```

---

## üîß –®–≤–∏–¥–∫–∞ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Ollama:
```bash
curl http://localhost:11434/api/tags
# –Ø–∫—â–æ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç–∏:
ollama serve
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Gateway logs –Ω–∞ —Å–≤—ñ–∂—ñ –ø–æ–º–∏–ª–∫–∏:
```bash
tail -f ~/.clawdbot/logs/gateway.err.log | grep -E "(error|fail|exceed)"
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–µ—Å—ñ—é:
```bash
clawdbot sessions list
```

---

## üìã –í–∏—Å–Ω–æ–≤–∫–∏

**–ô–º–æ–≤—ñ—Ä–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ "–∑–∞–≤–∏—Å–∞–Ω—å":**
1. Memory search –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑—Ä–æ–±–∏—Ç–∏ batch upload –¥–æ Ollama
2. Ollama –ø–æ–≤–µ—Ä—Ç–∞—î 404 (–Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π –∞–±–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π)
3. Fallback –Ω–∞ non-batch –∑–∞–π–º–∞—î —á–∞—Å
4. –ü—Ä–∏ –≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ parallel tool calls —Ü–µ –Ω–∞–∫–æ–ø–∏—á—É—î—Ç—å—Å—è
5. Lane timeout —Å–ø—Ä–∞—Ü—å–æ–≤—É—î, —ñ —è "–≤–∏–ø–∞–¥–∞—é"

**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Ollama –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ embedding provider –Ω–∞ —â–æ—Å—å —â–æ –ø—Ä–∞—Ü—é—î.

---

**–î–æ—Å–ª—ñ–¥–∏–≤:** –ë—Ä–æ ü§ô  
**–î–∞—Ç–∞:** 2026-02-04
