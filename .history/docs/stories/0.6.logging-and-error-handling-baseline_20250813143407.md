# Story 0.6: Logging & error handling baseline

## Status
Ready for Dev

## Dependencies

- 0.4 App structure alignment

## Story

As a developer, I want consistent logging and error handling patterns in frontend and canister calls, so that failures are diagnosable and user-facing errors are consistent.

## Acceptance Criteria

1. Frontend logger utility `lib/core/logger/logger.dart` with levels: debug, info, warn, error; sink to console and optional file for dev (`.ai/debug-log.md`). [Source: architecture/tech-stack.md#technology-stack-table]
2. Service layer implements Result handling; domain error classes/enums defined (e.g., `AuthError`, `NetworkError`). [Source: architecture/coding-standards.md#critical-fullstack-rules]
3. Common error UI components (`ErrorDialog`, `SuccessSnackbar`) integrated in flows. [Source: architecture/frontend-architecture.md#flutter-app-structure]
4. Debug log path honored for dev agents per core-config (`.ai/debug-log.md`). [Source: .bmad-core/core-config.yaml]

### BDD Scenarios

- Scenario: Errors are logged and surfaced to the user
  - Given a service call fails with a mapped error
  - When the error is handled in the UI
  - Then an `ErrorDialog` is shown and a log entry is written via `logger`

- Scenario: Debug log entries are appended in dev builds
  - Given a dev build
  - When key events occur
  - Then entries are appended to `.ai/debug-log.md`

## Tasks / Subtasks

- [ ] Create `lib/core/logger/logger.dart` with API: `logDebug/info/warn/error()`. (AC: 1)
- [ ] Implement Result handling helpers; define error classes/enums. (AC: 2) [Source: architecture/backend-architecture.md#authentication-architecture]
- [ ] Integrate shared error dialog/snackbar widgets in auth and market flows. (AC: 3) [Source: architecture/frontend-architecture.md#flutter-app-structure]
- [ ] Append key debug entries to `.ai/debug-log.md` in dev builds. (AC: 4)

## Dev Notes

- Follow coding standards for error and input validation. [Source: architecture/coding-standards.md#critical-fullstack-rules]
- Use component structure for error UI from `shared/widgets/`. [Source: architecture/frontend-architecture.md#flutter-app-structure]

## Testing

- Unit tests for error mapping; widget test for `ErrorDialog` rendering on error states in auth flow. [Source: architecture/testing-strategy.md#test-organization]

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY-MM-DD | 0.1 | Initial draft for logging & error handling | Scrum Master |

## Dev Agent Record

- Agent Model Used: _TBD_
- Debug Log References: _TBD_
- Completion Notes List: _TBD_
- File List: _TBD_

## QA Results

_TBD_


