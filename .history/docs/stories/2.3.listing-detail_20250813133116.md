# Story 2.3: Listing detail view

## Status
Ready for Review

## Dependencies

- 2.1 Create listing
- 2.2 Search and filter
- 1.2 Profile & reputation

## Story

As a buyer, I want a detailed listing page with images, seller reputation, and a Buy CTA so I can decide and proceed.

## Acceptance Criteria

1. Given a listing exists, when I open it, then I see title, images, price, description, seller reputation, and Buy CTA. [Source: prd/4-functional-requirements.md#42-trading-functions]
2. Given the seller has a reputation score, when I view the listing, then the reputation is visible. [Source: architecture/data-models.md#user-model]

### BDD Scenarios

- Scenario: View listing detail
  - Given search results
  - When I tap a listing
  - Then I see all core details and a Buy button

- Scenario: Missing images fallback
  - Given a listing without images
  - When I open it
  - Then I see a placeholder image

## Tasks / Subtasks

- [ ] Frontend: Detail screen (AC: 1, 2)
  - [ ] `ListingDetailScreen` with image gallery and seller reputation section. [Source: architecture/frontend-architecture.md#flutter-app-structure]
  - [ ] Buy CTA navigates to `SwapScreen` with selected listing. [Source: architecture/core-workflows.md#atomic-swap-flow]

- [ ] Frontend: Data fetching (AC: 1)
  - [ ] Fetch listing detail with `getListing(id)` and seller profile for reputation. [Source: architecture/api-specification.md#marketplace-canister] [Source: architecture/api-specification.md#user-management-canister]

- [ ] Testing (AC: 1, 2)
  - [ ] Widget tests for rendering, gallery, reputation, and CTA flow. [Source: architecture/testing-strategy.md#test-organization]

## Dev Notes

### Data Models & APIs

- Listing and User models, `getListing`, `getUserProfile`. [Source: architecture/data-models.md] [Source: architecture/api-specification.md]

### Structure and Workflows

- UI in `lib/features/marketplace/screens/listing_detail_screen.dart`; service via ICP layer. [Source: architecture/frontend-architecture.md#frontend-services-layer]

## Testing

- Verify:
  - All listing fields appear
  - Seller reputation shown
  - Buy navigates to swap initiation

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY-MM-DD | 0.1 | Initial draft created for Story 2.3 | Scrum Master |

## Dev Agent Record

- Agent Model Used: _TBD_
- Debug Log References: _TBD_
- Completion Notes List: _TBD_
- File List: _TBD_

## QA Results

_TBD_


