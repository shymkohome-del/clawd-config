# Story 0.8: Security baseline

## Status
Ready for Dev

## Dependencies

- 0.6 Logging & error handling baseline

## Story

As a developer, I want baseline security practices (input validation, principal handling, rate limiting notes), so that early features are built on secure defaults.

## Acceptance Criteria

1. Input validation patterns documented and adopted (email format, password rules, string length, numeric ranges). [Source: architecture/coding-standards.md#critical-fullstack-rules]
2. Principal handling and auth guard patterns documented and enforced in service layer; protected routes implemented. [Source: architecture/backend-architecture.md#authentication-architecture]
3. Non-functional security requirements referenced and tracked (GDPR/CCPA mention from PRD 5.2). [Source: docs/prd/5-non-functional-requirements.md#5.2-security-requirements]
4. Rate limiting guidance documented for canister calls likely to be abused (authentication, listing creation). [Source: architecture/coding-standards.md#critical-fullstack-rules]

### BDD Scenarios

- Scenario: Validation helpers enforce input rules
  - Given invalid email and short password inputs
  - When validators are executed
  - Then errors are returned matching documented rules

- Scenario: Security checklist exists for developers
  - Given the repository
  - When I open the security checklist document
  - Then it includes validation, principal checks, and rate limit guidance

## Tasks / Subtasks

- [ ] Write a short security checklist for devs (repo doc) covering validation, principal checks, rate limits. (AC: 3, 4)
  - [ ] Target file: `docs/security/security-checklist.md`.
- [ ] Implement input validation helpers and integrate with forms/service calls. (AC: 1)
  - [ ] Create `lib/shared/utils/validators.dart` and import in auth forms and service layer.
- [ ] Add auth guard utilities and principal checks in service layer. (AC: 2)

## Dev Notes

- Follow coding standards for validation, rate limiting, and principal security. [Source: architecture/coding-standards.md#critical-fullstack-rules]
- Reuse backend auth guard concepts on the client side where applicable. [Source: architecture/backend-architecture.md#authentication-architecture]

## Testing

- Unit tests for validators (email/password) and auth guard utilities; ensure protected route blocks unauthenticated access. [Source: architecture/testing-strategy.md#test-organization]

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY-MM-DD | 0.1 | Initial draft for security baseline | Scrum Master |

## Dev Agent Record

- Agent Model Used: _TBD_
- Debug Log References: _TBD_
- Completion Notes List: _TBD_
- File List: _TBD_

## QA Results

_TBD_


