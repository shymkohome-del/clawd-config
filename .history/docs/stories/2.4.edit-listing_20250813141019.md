# Story 2.4: Edit listing

## Status
Ready for Review

## Dependencies

- 2.1 Create listing

## Story

As a seller, I want to edit my existing listing so I can fix mistakes or update details.

## Acceptance Criteria

1. Given I am the seller, when I edit allowed fields and save, then the listing updates successfully. [Source: prd/4-functional-requirements.md#42-trading-functions]
2. Given invalid inputs, when I save, then I see validation errors and no update occurs. [Source: architecture/backend-architecture.md#canister-based-service-architecture]

### BDD Scenarios

- Scenario: Edit title and price
  - Given I own the listing
  - When I change title and price
  - Then the changes persist and appear in detail and search

- Scenario: Unauthorized edit prevented
  - Given I do not own the listing
  - When I try to edit
  - Then the update is rejected

## Tasks / Subtasks

- [ ] Frontend: Edit screen/form (AC: 1, 2)
 - [ ] Reuse create form with initial values and validators. [Source: architecture/frontend-architecture.md#flutter-app-structure]
 - [ ] Screen path: `lib/features/market/screens/edit_listing_screen.dart`; provider: `lib/features/market/providers/listing_provider.dart`. [Source: architecture/frontend-architecture.md#flutter-app-structure]

- [ ] Service integration (AC: 1)
  - [ ] Call `updateListing(id, updates)` and handle `Result`. [Source: architecture/api-specification.md#marketplace-canister]

- [ ] Backend (AC: 1, 2)
  - [ ] Enforce ownership check and validation in canister. [Source: architecture/coding-standards.md#critical-fullstack-rules]

- [ ] Testing (AC: 1, 2)
  - [ ] Widget tests for edit flow; canister unit tests for validation/ownership. [Source: architecture/testing-strategy.md#test-organization]

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY-MM-DD | 0.1 | Initial draft created for Story 2.4 | Scrum Master |


