# Story 0.4: App structure alignment

## Status
Ready for Review

## Dependencies

- 0.1 Repo & CI baseline

## Story

As a developer, I want the Flutter app folders, routes, and providers aligned with the architecture, so that teams can navigate and extend features consistently.

## Acceptance Criteria

1. Directory structure under `lib/` matches `features/`, `core/`, and `shared/` guidance. [Source: docs/architecture/frontend-architecture.md#flutter-app-structure]
2. Initial routes scaffolded and documented: `/login`, `/register`, `/home`. [Source: docs/architecture/frontend-architecture.md#routing-architecture]
3. Any deltas from the monorepo structure are documented in this repo. [Source: docs/architecture/unified-project-structure.md#monorepo-structure]

## Key Files to Verify/Create

- `crypto_market/lib/features/auth/`
- `crypto_market/lib/features/market/` (normalize from any `marketplace` mentions)
- `crypto_market/lib/shared/`
- Routes: `/login`, `/register`, `/home` in `crypto_market/lib/main.dart` or router file

## References

- `docs/architecture/frontend-architecture.md#flutter-app-structure`
- `docs/architecture/frontend-architecture.md#routing-architecture`

### BDD Scenarios

- Scenario: Base routes are navigable
  - Given the app builds successfully
  - When I navigate from `/login` to `/register` to `/home`
  - Then no runtime errors occur and each screen renders

## Tasks / Subtasks

- [ ] Ensure presence of `lib/features/auth/`, `lib/features/market/`, `lib/shared/`, and `lib/core/blockchain/`. (AC: 1) [Source: docs/architecture/frontend-architecture.md#flutter-app-structure]
- [ ] Define base routes `/login`, `/register`, `/home` with placeholder screens. (AC: 2) [Source: docs/architecture/frontend-architecture.md#routing-architecture]
- [ ] Document structure and any deviations in `README.md`. (AC: 3)

## Dev Notes

- Follow the proposed feature-module structure and Riverpod provider placement. [Source: docs/architecture/frontend-architecture.md#state-management-architecture]
- This repo is a single Flutter app; capture the divergence from the monorepo in notes. [Source: docs/architecture/unified-project-structure.md#monorepo-structure]

## Testing

- Verify app builds and can navigate `/login` → `/register` → `/home` without runtime errors. [Source: docs/architecture/testing-strategy.md#test-organization]
- Widget test: basic navigation route smoke test.

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY-MM-DD | 0.1 | Initial draft for app structure alignment | Scrum Master |

## Dev Agent Record

- Agent Model Used: _TBD_
- Debug Log References: _TBD_
- Completion Notes List: _TBD_
- File List: _TBD_

## QA Results

_TBD_



- Findings:
  - Status: Partially met
  - Evidence:
    - Present: `lib/features/{auth,market,chat,payments,profile}`, `lib/shared/`, `lib/core/`
    - Missing: `lib/core/blockchain/`
    - Routes not defined: `lib/main.dart` contains only `MyHomePage` (no `/login`, `/register`, `/home`)
    - README lacks structure/deltas documentation
  - Gaps vs Acceptance Criteria: AC1 partially met; AC2 and AC3 not met
- Actions to pass:
  - Create `lib/core/blockchain/` (placeholder ok until Story 0.5)
  - Define base routes `/login`, `/register`, `/home` with placeholder screens and wire into `MaterialApp` (or router)
  - Document structure and any deviations in `README.md`
- Re-test checklist:
  - App builds and navigates `/login` → `/register` → `/home` without runtime errors
  - Widget test added for basic route navigation
