# Story 0.5: ICP service layer bootstrap

## Status

Draft

## Story

As a developer, I want an ICP service layer with canister client stubs and error mapping, so that features can call canisters through a stable API.

## Acceptance Criteria

1. `ICPService` skeleton exists with initialization hooks for marketplace, user_management, atomic_swap, price_oracle. [Source: architecture/frontend-architecture.md#frontend-services-layer]
2. Client methods return typed results and map Result errors to domain errors. [Source: architecture/coding-standards.md#critical-fullstack-rules]
3. Service is injected into feature services/providers. [Source: architecture/frontend-architecture.md#state-management-architecture]

## Tasks / Subtasks

- [ ] Create `lib/core/blockchain/icp_service.dart` skeleton with actor init. (AC: 1) [Source: architecture/frontend-architecture.md#frontend-services-layer]
- [ ] Add marketplace and user management method stubs used by early stories. (AC: 1) [Source: architecture/api-specification.md#icp-candid-interface]
- [ ] Implement common error mapping utilities. (AC: 2) [Source: architecture/coding-standards.md#critical-fullstack-rules]
- [ ] Wire into providers for `auth` and `marketplace` features. (AC: 3)

## Dev Notes

- Use the interface patterns shown (actor initialization and typed mapping). [Source: architecture/frontend-architecture.md#frontend-services-layer]
- Follow Candid type definitions for request/response shapes. [Source: architecture/api-specification.md#icp-candid-interface]

## Testing

- Unit test stubs to verify actor initialization and error mapping functions. [Source: architecture/testing-strategy.md#test-organization]

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY-MM-DD | 0.1 | Initial draft for ICP service layer | Scrum Master |

## Dev Agent Record

- Agent Model Used: _TBD_
- Debug Log References: _TBD_
- Completion Notes List: _TBD_
- File List: _TBD_

## QA Results

_TBD_


