Title: Story 0.9.8 — Cleanup and metrics
Status: InProgress

# Story 0.9.8: Cleanup and metrics

## Story

As a maintainer, I want merged branches cleaned up and visible run metrics so that the repo stays tidy and we can monitor automation outcomes.

## Acceptance Criteria

1. Post‑merge cleanup job deletes merged branches when repo rules allow; safely skips protected branches.
2. Metrics output in job summary includes: whether PR was created or reused, whether auto‑merge was enabled, and reasons for any blocks.

## Dependencies

- 0.9.7 Guardrails and quality gates

## Tasks / Subtasks

- [ ] Implement a cleanup step that detects merged PRs and deletes the source branch via REST API when allowed.
- [ ] Add a metrics section to the job summary with standardized keys and counts.

## Testing

- Merge a test PR and verify branch deletion (or safe skip) and presence of metrics.

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| YYYY‑MM‑DD | 0.1 | Initial draft | Scrum Master |
| 2025-08-19 | 0.2 | QA: Sync — Post-merge cleanup Pass via fallback; metrics summary Partial; Status InProgress. | QA |

## Dev Agent Record

- Implemented:
  - Fallback workflow deletes source branch after successful squash merge
  - Basic job summary for merge decision in fallback
- Pending:
  - Expanded metrics: created vs reused PR, auto-merge enabled vs blocked reasons

## QA Results

- AC1 — Post-merge cleanup: Pass. Fallback removes source branch after merge when permitted.
- AC2 — Metrics summary: Partial. Summary includes PR number and action; add created vs reused PR and auto‑merge enabled vs blocked reasons.

Verdict: Keep `Status: InProgress`. Add extended metrics in summary.


