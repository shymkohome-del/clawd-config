# Story 0.7: Auth skeleton (UI-only)

Status: Done

## Dependencies

- 0.4 App structure alignment

## Story

As a user, I want to see basic login and registration screens and protected route behavior, so that the initial navigation and UX are in place before wiring backend.

## Acceptance Criteria

1. `RegisterScreen` and `LoginScreen` exist with form validation: email regex, password ≥ 8 chars, username non-empty; no backend calls. [Source: architecture/frontend-architecture.md#flutter-app-structure]
2. Protected route component redirects unauthenticated users to `/login`. [Source: architecture/frontend-architecture.md#routing-architecture]
3. Navigation routes are defined and accessible: `/login`, `/register`, `/home`. [Source: architecture/frontend-architecture.md#routing-architecture]

### BDD Scenarios

- Scenario: Validation errors shown for invalid input
  - Given an invalid email and a password shorter than 8 characters
  - When I submit the registration form
  - Then validation messages are shown and no backend call is made

- Scenario: Protected route redirects unauthenticated users
  - Given I am not authenticated
  - When I navigate to a protected route
  - Then I am redirected to `/login`

## Tasks / Subtasks

- [x] Create `RegisterScreen` (email, password, username) with validators; `LoginScreen` with placeholders. (AC: 1)
- [x] Add `ProtectedRoute` widget redirecting to `/login`. (AC: 2)
- [x] Wire routes in router: `/login`, `/register`, `/home`. (AC: 3)
- [x] Localization: implement i18n for form labels, validation messages, and navigation text.
- [x] Logging: debug logs for validation failures, navigation events, and redirects (disabled in production).

## Dev Notes

- Follow example route and protected route patterns. [Source: architecture/frontend-architecture.md#routing-architecture]
- Align screen locations under `lib/features/auth/screens/`. [Source: architecture/frontend-architecture.md#flutter-app-structure]

## Testing

- Widget tests: validation messages (invalid email, short password), and protected route redirection to `/login`. [Source: architecture/testing-strategy.md#test-organization]

## Change Log

| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| 2025-01-04 | 0.1 | Initial draft for auth UI skeleton | Scrum Master |
| 2025-01-04 | 0.2 | Implemented GoRouter navigation and protected routes | Dev |

## Dev Agent Record

- Agent Model Used: Claude 3.5 Sonnet
- Debug Log References: Story implementation completed successfully
- Completion Notes List:
  - ✅ Created `RegisterScreen` and `LoginScreen` with form validation (email regex, password ≥ 8 chars, username non-empty)
  - ✅ Added `ProtectedRoute` widget that redirects unauthenticated users to `/login`
  - ✅ Configured navigation routes using GoRouter: `/login`, `/register`, `/home`
  - ✅ Implemented multi-language support using existing Flutter i18n framework
- File List:
  - `lib/core/routing/protected_route.dart` — new protected route component
  - `lib/core/routing/app_router.dart` — GoRouter configuration
  - `lib/main.dart` — updated to use GoRouter
  - `lib/features/auth/screens/login_screen.dart` — updated navigation
  - `lib/features/auth/screens/register_screen.dart` — updated navigation
  - `test/widget/protected_route_test.dart` — unit tests

## QA Results

**QA Validation Date:** 2025-08-28
**QA Status:** ✅ PASS

### Acceptance Criteria Validation
- [x] AC1: Register/Login validation (email regex, password ≥ 8, username non-empty)
- [x] AC2: ProtectedRoute redirects unauthenticated users to `/login`
- [x] AC3: Routes available: `/login`, `/register`, `/home`

### Technical Validation
- All tests green; analyzer clean; formatted

